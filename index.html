<!DOCTYPE html>
<html>
<head>
  <title>Download Raw Firebase Data</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <button onclick="downloadData()">Download Raw Data</button>

  <script>
    // ðŸ”¹ Replace with your own Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function downloadData() {
      const snapshot = await db.collection("farms").get(); // <-- change 'farms' to your collection name
      const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

      const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "farms_raw.json";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>